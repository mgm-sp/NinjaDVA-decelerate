@model decelerate.Views.PresenterArea.IndexModel
@{
    ViewData["Title"] = "Presenter Area";
    ViewData["HomeController"] = "PresenterArea";
    /* Calculate slider thresholds: */
    uint t1 = (100 - Model.DangerThreshold) / 2;
    uint t2 = (100 - Model.WarningThreshold) / 2;
    uint t3 = (100 + Model.WarningThreshold) / 2;
    uint t4 = (100 + Model.DangerThreshold) / 2;
    int avg = (100 + Model.AverageSpeedChoice) / 2;
}

<div class="row">
    <div class="col-md-12">
        <h3>Welcome to the presenter area!</h3>
        The audience wants you to ...
        <div id="statusDiv" class="alert alert-@Model.Color display-1 text-center">
            <p id="statusText">@Model.Text</p>
        </div>
        <div class="w-100 alert alert-secondary" style="background: linear-gradient(90deg, #f8d7da @(t1-2)%, #fff3cd @(t1+2)%, #fff3cd @(t2-2)%, #d4edda @(t2+2)%, #d4edda @(t3-2)%, #fff3cd @(t3+2)%, #fff3cd @(t4-2)%, #f8d7da @(t4+2)%);">
            <div class="text-right" style="width: @avg%" id="statusSlider">&#11044;</div>
        </div>
        <div class="d-flex justify-content-around">
            <div>&#10229; slower</div>
            <div>faster &#10230;</div>
        </div>
    </div>
</div>
<div class="row justify-content-md-center">
    <div class="col-md-6">
        <h4 class="text-center">Individual votes</h4>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Speed Choice</th>
                </tr>
            </thead>
            <tbody id="users">
                @foreach (var user in Model.Users)
                {
                    <tr>
                        <th scope="row">@user.Name</th>
                        <td>@(user.SpeedChoice.HasValue ? user.SpeedChoice.ToString() : "none")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<template id="userTemplate">
    <tr>
        <th scope="row">[name]</th>
        <td>[speedChoice]</td>
    </tr>
</template>

@section Scripts {
    <a id="pollUrl" asp-controller="PresenterArea" asp-action="Poll"></a>
    <script src="~/js/presenterarea.js" asp-append-version="true"></script>
}